var w=Object.defineProperty;var v=(n,t,s)=>t in n?w(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var r=(n,t,s)=>(v(n,typeof t!="symbol"?t+"":t,s),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();class a{constructor(t=0,s=0){r(this,"x");r(this,"y");this.x=t,this.y=s}getMagnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){const t=this.getMagnitude();return new a(this.x/t,this.y/t)}add(t){return new a(this.x+t.x,this.y+t.y)}subtract(t){return new a(this.x-t.x,this.y-t.y)}multiply(t){return new a(this.x*t,this.y*t)}dot(t){return this.x*t.x+this.y*t.y}distanceTo(t){return this.subtract(t).getMagnitude()}}const d=class d{constructor(t,s,e){r(this,"position");r(this,"radius");r(this,"velocity");r(this,"color","#262ecf");this.position=t,this.radius=s,this.velocity=e}static getRadiusForMass(t){return Math.sqrt(t)}getMass(){return this.radius*this.radius}setMass(t){this.radius=d.getRadiusForMass(t)}getMomentum(){return this.velocity.multiply(this.getMass())}setMomentum(t){const s=this.getMass();this.velocity=t.multiply(1/s)}update(t){this.position=this.position.add(this.velocity.multiply(t))}updateColor(t){this.radius>t.radius?this.color="#c32626":this.color="#17a110"}absorb(t,s){let e;if(s>=t.radius)s=t.radius,e=t.getMass(),t.radius=0;else{const o=t.getMass();t.radius-=s,e=o-t.getMass()}const i=this.getMomentum().add(t.velocity.multiply(e));this.setMass(this.getMass()+e),this.setMomentum(i)}eject(t){const s=1-.6*Math.random(),e=this.getMass()*d.ejectedMassRatio*s,i=d.getRadiusForMass(e);this.setMass(this.getMass()-e);const o=new d(this.position.add(t.multiply(this.radius+i)),i,this.velocity.add(t.multiply(d.ejectedSpeed)));return this.setMomentum(this.getMomentum().subtract(o.getMomentum())),o}draw(t){const s=t.createRadialGradient(this.position.x,this.position.y,0,this.position.x,this.position.y,this.radius);s.addColorStop(.3,this.color+"00"),s.addColorStop(.75,this.color+"00"),s.addColorStop(1,this.color),t.strokeStyle=this.color,t.fillStyle=s,t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(this.position.x,this.position.y,.7*this.radius,-3,-2),t.strokeStyle="white",t.lineWidth=.2*this.radius,t.lineCap="round",t.stroke()}};r(d,"ejectedSpeed",500),r(d,"ejectedMassRatio",1/20);let u=d;class b{constructor(t,s,e){r(this,"width");r(this,"height");r(this,"bubbles");r(this,"playerBubble");this.width=t,this.height=s,this.bubbles=[e],this.playerBubble=e}bounce(t){t.position.x-t.radius<0?(t.position.x=t.radius,t.velocity.x=-t.velocity.x):t.position.x+t.radius>this.width&&(t.position.x=this.width-t.radius,t.velocity.x=-t.velocity.x),t.position.y-t.radius<0?(t.position.y=t.radius,t.velocity.y=-t.velocity.y):t.position.y+t.radius>this.height&&(t.position.y=this.height-t.radius,t.velocity.y=-t.velocity.y)}update(t){for(const s of this.bubbles)s.update(t),this.bounce(s),s!==this.playerBubble&&s.updateColor(this.playerBubble);for(let s=0;s<this.bubbles.length;s++)for(let e=s+1;e<this.bubbles.length;e++){const i=this.bubbles[s],o=this.bubbles[e],c=i.position.distanceTo(o.position);if(c<i.radius+o.radius){const m=i.radius+o.radius-c;i.radius>=o.radius?i.absorb(o,m):o.absorb(i,m)}}this.bubbles=this.bubbles.filter(s=>s.radius>0)}draw(t){t.fillStyle=t.createLinearGradient(0,0,0,this.height),t.fillStyle.addColorStop(0,"#140b50"),t.fillStyle.addColorStop(1,"#000000"),t.fillRect(0,0,this.width,this.height);for(const s of this.bubbles)s.draw(t)}canPlaceBubble(t){for(const s of this.bubbles)if(s.position.distanceTo(t.position)<s.radius+t.radius)return!1;return!0}}const p=1024,y=768,l=document.getElementById("canvas");l.width=p;l.height=y;const S=l.getContext("2d"),f=new u(new a(p/2,y/2),40,new a);function M(){const n=performance.now(),t=(n-g)/1e3;g=n,h.update(Math.min(t,1/15)),h.draw(S),requestAnimationFrame(M)}l.addEventListener("click",n=>{const t=l.getBoundingClientRect(),s=n.clientX-t.left,e=n.clientY-t.top,i=f.eject(new a(s,e).subtract(f.position).normalize());h.bubbles.push(i)});let g=performance.now();const h=new b(p,y,f);for(;h.bubbles.length<20;){const n=Math.random()*p,t=Math.random()*y,s=Math.random()*40+20,e=new u(new a(n,t),s,new a);h.canPlaceBubble(e)&&h.bubbles.push(e)}M();
