var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function o(){return Object.create(null)}function l(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function s(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function g(){return d(" ")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.data!==n&&(t.data=n)}let v;function $(t){v=t}function b(){const t=function(){if(!v)throw new Error("Function called outside component initialization");return v}();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const l=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);o.slice().forEach(n=>{n.call(t,l)})}}}const k=[],x=[],y=[],w=[],C=Promise.resolve();let S=!1;function L(t){y.push(t)}function _(){const t=new Set;do{for(;k.length;){const t=k.shift();$(t),E(t.$$)}for(;x.length;)x.pop()();for(let n=0;n<y.length;n+=1){const e=y[n];t.has(e)||(e(),t.add(e))}y.length=0}while(k.length);for(;w.length;)w.pop()();S=!1}function E(t){if(null!==t.fragment){t.update(),l(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(L)}}const A=new Set;let T;function q(t,n){t&&t.i&&(A.delete(t),t.i(n))}function j(t,n,e,o){if(t&&t.o){if(A.has(t))return;A.add(t),T.c.push(()=>{A.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function I(t){t&&t.c()}function M(t,n,o){const{fragment:r,on_mount:c,on_destroy:u,after_update:a}=t.$$;r&&r.m(n,o),L(()=>{const n=c.map(e).filter(i);u?u.push(...n):l(n),t.$$.on_mount=[]}),a.forEach(L)}function N(t,n){const e=t.$$;null!==e.fragment&&(l(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function G(t,n){-1===t.$$.dirty[0]&&(k.push(t),S||(S=!0,C.then(_)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function V(n,e,i,r,c,u,a=[-1]){const s=v;$(n);const f=e.props||{},d=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:o(),dirty:a};let g=!1;d.ctx=i?i(n,f,(t,e,...o)=>{const l=o.length?o[0]:e;return d.ctx&&c(d.ctx[t],d.ctx[t]=l)&&(d.bound[t]&&d.bound[t](l),g&&G(n,t)),e}):[],d.update(),g=!0,l(d.before_update),d.fragment=!!r&&r(d.ctx),e.target&&(e.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):d.fragment&&d.fragment.c(),e.intro&&q(n.$$.fragment),M(n,e.target,e.anchor),_()),$(s)}class B{$destroy(){N(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function O(t,n,e){const o=t.slice();return o[16]=n[e],o[18]=e,o}function R(t){let n,e=t[1],o=[];for(let n=0;n<e.length;n+=1)o[n]=z(O(t,e,n));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=d("")},m(t,e){for(let n=0;n<o.length;n+=1)o[n].m(t,e);u(t,n,e)},p(t,l){if(450&l){let i;for(e=t[1],i=0;i<e.length;i+=1){const r=O(t,e,i);o[i]?o[i].p(r,l):(o[i]=z(r),o[i].c(),o[i].m(n.parentNode,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=e.length}},d(t){s(o,t),t&&a(n)}}}function U(t){let n,e,o;return{c(){n=f("div"),e=d(t[0]),h(n,"class","big")},m(l,i){u(l,n,i),c(n,e),o=p(n,"click",t[5])},p(t,n){1&n&&m(e,t[0])},d(t){t&&a(n),o()}}}function W(t){let n,e=t[18]+1+"";return{c(){n=d(e)},m(t,e){u(t,n,e)},d(t){t&&a(n)}}}function z(t){let n,e,o,i=t[16]&&W(t);function r(...n){return t[14](t[18],...n)}function s(...n){return t[15](t[18],...n)}return{c(){n=f("div"),i&&i.c(),e=g(),h(n,"class","small")},m(l,a){u(l,n,a),i&&i.m(n,null),c(n,e),o=[p(n,"pointerdown",r),p(n,"pointerup",s),p(n,"pointerleave",t[8])]},p(o,l){(t=o)[16]?i||(i=W(t),i.c(),i.m(n,e)):i&&(i.d(1),i=null)},d(t){t&&a(n),i&&i.d(),l(o)}}}function F(n){let e,o;function l(t,n){return void 0!==t[0]?U:R}let i=l(n),r=i(n);return{c(){e=f("div"),r.c(),h(e,"class",o="cell R"+n[4]+" C"+n[3]+" "+(n[2]?"locked":""))},m(t,n){u(t,e,n),r.m(e,null)},p(t,[n]){i===(i=l(t))&&r?r.p(t,n):(r.d(1),r=i(t),r&&(r.c(),r.m(e,null))),4&n&&o!==(o="cell R"+t[4]+" C"+t[3]+" "+(t[2]?"locked":""))&&h(e,"class",o)},i:t,o:t,d(t){t&&a(e),r.d()}}}function H(t,n,e){let{value:o}=n,{annotations:l}=n,{index:i}=n,{isLocked:r}=n,c=b(),u=void 0,a=void 0,s=i%9,f=~~(i/9);function d(){clearTimeout(u),a=void 0}function g(t){r||(void 0!==u&&d(),u=setTimeout(()=>{c("setCellValue",{index:i,value:t+1}),d()},250))}function p(t){void 0!==u&&(d(),c("toggleAnnotation",{index:i,value:t}))}return t.$set=t=>{"value"in t&&e(0,o=t.value),"annotations"in t&&e(1,l=t.annotations),"index"in t&&e(9,i=t.index),"isLocked"in t&&e(2,r=t.isLocked)},[o,l,r,s,f,function(){r||c("setCellValue",{index:i,value:void 0})},g,p,function(){d()},i,u,a,c,d,t=>g(t),t=>p(t)]}class P extends B{constructor(t){super(),V(this,t,H,F,r,{value:0,annotations:1,index:9,isLocked:2})}}function D(t,n,e){const o=t.slice();return o[11]=n[e],o[13]=e,o}function J(t){let e;const o=[t[11],{index:t[13]}];let l={};for(let t=0;t<o.length;t+=1)l=n(l,o[t]);const i=new P({props:l});return i.$on("toggleAnnotation",t[3]),i.$on("setCellValue",t[2]),{c(){I(i.$$.fragment)},m(t,n){M(i,t,n),e=!0},p(t,n){const e=1&n?function(t,n){const e={},o={},l={$$scope:1};let i=t.length;for(;i--;){const r=t[i],c=n[i];if(c){for(const t in r)t in c||(o[t]=1);for(const t in c)l[t]||(e[t]=c[t],l[t]=1);t[i]=c}else for(const t in r)l[t]=1}for(const t in o)t in e||(e[t]=void 0);return e}(o,[(l=t[11],"object"==typeof l&&null!==l?l:{}),o[1]]):{};var l;i.$set(e)},i(t){e||(q(i.$$.fragment,t),e=!0)},o(t){j(i.$$.fragment,t),e=!1},d(t){N(i,t)}}}function K(t){let n,e,o,i,r,v,$,b,k,x,y,w,C,S,L,_,E,A=t[1]?"Generate":"Stop",I=t[1]?"Solve":"Stop",M=t[0],N=[];for(let n=0;n<M.length;n+=1)N[n]=J(D(t,M,n));const G=t=>j(N[t],1,1,()=>{N[t]=null});return{c(){n=f("div"),e=f("div");for(let t=0;t<N.length;t+=1)N[t].c();o=g(),i=f("div"),r=f("button"),v=d(A),$=g(),b=f("button"),b.textContent="Clear",k=g(),x=f("button"),y=d(I),w=g(),C=f("button"),C.textContent="Lock",S=g(),L=f("button"),L.textContent="Unlock",h(e,"class","grid"),h(i,"id","buttons")},m(l,a){u(l,n,a),c(n,e);for(let t=0;t<N.length;t+=1)N[t].m(e,null);c(n,o),c(n,i),c(i,r),c(r,v),c(i,$),c(i,b),c(i,k),c(i,x),c(x,y),c(i,w),c(i,C),c(i,S),c(i,L),_=!0,E=[p(r,"click",t[6]),p(b,"click",t[8]),p(x,"click",t[7]),p(C,"click",t[4]),p(L,"click",t[5])]},p(t,[n]){if(13&n){let o;for(M=t[0],o=0;o<M.length;o+=1){const l=D(t,M,o);N[o]?(N[o].p(l,n),q(N[o],1)):(N[o]=J(l),N[o].c(),q(N[o],1),N[o].m(e,null))}for(T={r:0,c:[],p:T},o=M.length;o<N.length;o+=1)G(o);T.r||l(T.c),T=T.p}(!_||2&n)&&A!==(A=t[1]?"Generate":"Stop")&&m(v,A),(!_||2&n)&&I!==(I=t[1]?"Solve":"Stop")&&m(y,I)},i(t){if(!_){for(let t=0;t<M.length;t+=1)q(N[t]);_=!0}},o(t){N=N.filter(Boolean);for(let t=0;t<N.length;t+=1)j(N[t]);_=!1},d(t){t&&a(n),s(N,t),l(E)}}}function Q(t,n,e){let o=Array(81);for(let t=0;t<81;t++)o[t]={value:void 0,isLocked:!1,annotations:Array(9).fill(!1)};let l,i=void 0;function r(){for(let t=0;t<81;t++)e(0,o[t].annotations=Array(9).fill(!1),o)}function c(){for(let t=0;t<81;t++)e(0,o[t].isLocked=void 0!==o[t].value,o)}return t.$$.update=()=>{512&t.$$.dirty&&e(1,l=void 0===i)},[o,l,function(t){e(0,o[t.detail.index].value=t.detail.value,o)},function(t){let n=t.detail.index,l=t.detail.value;e(0,o[n].annotations[l]=!o[n].annotations[l],o)},c,function(){for(let t=0;t<81;t++)e(0,o[t].isLocked=!1,o)},function(){l?(e(9,i=new Worker("./solver.js")),i.postMessage({command:"generate"}),e(9,i.onmessage=t=>{if(void 0!==t.data){for(let n=0;n<81;n++)e(0,o[n].value=t.data[n],o);r(),c()}i.terminate(),e(9,i=void 0)},i)):(i.terminate(),e(9,i=void 0))},function(){l?(e(9,i=new Worker("./solver.js")),i.postMessage({command:"solve",values:o.map(t=>t.value)}),e(9,i.onmessage=t=>{if(void 0!==t.data)for(let n=0;n<81;n++)e(0,o[n].value=t.data[n],o);i.terminate(),e(9,i=void 0)},i)):(i.terminate(),e(9,i=void 0))},function(){for(let t=0;t<81;t++)o[t].isLocked||e(0,o[t].value=void 0,o);r()}]}class X extends B{constructor(t){super(),V(this,t,Q,K,r,{})}}function Y(n){let e,o,l,i,r;const c=new X({});return{c(){e=f("h1"),e.textContent="Sudoku",o=g(),I(c.$$.fragment),l=g(),i=f("div"),i.innerHTML="<h2>Instructions</h2> \n    <ul><li>Interaction with cells is done by clicking on one of the 3x3 subcells each representing a value from 1\n            to 9:\n            <ul><li>Long-click on a cell&#39;s subcell to place a value in the cell</li> \n                <li>Short-click on a cell&#39;s subcell to toggle a pencil annotation</li></ul></li> \n        <li>The <strong>Generate</strong> button clears the grid and generates a new proper Sudoku (single solution, all hints\n            required)\n        </li> \n        <li>The <strong>Clear</strong> button clears the value of all non-locked cells</li> \n        <li>The <strong>Lock</strong> button locks all cells with a value</li> \n        <li>The <strong>Unlock</strong> button unlocks all cells</li> \n        <li>The <strong>Solve</strong> button searches for a solution of the current grid\n            <ul><li>Cell values cannot be changed while solver is running</li> \n                <li>Solver can be interrupted by clicking on the same button (labeled &quot;Stop&quot; during computation)\n                </li> \n                <li>If a solution is found, values are displayed</li> \n                <li>If no solution exists, the solver ends (button labeled &quot;Solve&quot; again) but cells are not\n                    modified\n                </li></ul></li></ul>",h(i,"id","info")},m(t,n){u(t,e,n),u(t,o,n),M(c,t,n),u(t,l,n),u(t,i,n),r=!0},p:t,i(t){r||(q(c.$$.fragment,t),r=!0)},o(t){j(c.$$.fragment,t),r=!1},d(t){t&&a(e),t&&a(o),N(c,t),t&&a(l),t&&a(i)}}}return new class extends B{constructor(t){super(),V(this,t,null,Y,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
