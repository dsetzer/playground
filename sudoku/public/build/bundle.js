var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function l(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function r(t,n){t.appendChild(n)}function c(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function a(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function s(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function g(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function m(t,n){n=""+n,t.data!==n&&(t.data=n)}let p;function v(t){p=t}function $(){const t=function(){if(!p)throw new Error("Function called outside component initialization");return p}();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const l=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);o.slice().forEach(n=>{n.call(t,l)})}}}const b=[],k=[],x=[],y=[],C=Promise.resolve();let w=!1;function _(t){x.push(t)}function S(){const t=new Set;do{for(;b.length;){const t=b.shift();v(t),L(t.$$)}for(;k.length;)k.pop()();for(let n=0;n<x.length;n+=1){const e=x[n];t.has(e)||(e(),t.add(e))}x.length=0}while(b.length);for(;y.length;)y.pop()();w=!1}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const A=new Set;let E;function T(t,n){t&&t.i&&(A.delete(t),t.i(n))}function q(t,n,e,o){if(t&&t.o){if(A.has(t))return;A.add(t),E.c.push(()=>{A.delete(t),o&&(e&&t.d(1),o())}),t.o(n)}}function j(t){t&&t.c()}function I(t,e,i){const{fragment:r,on_mount:c,on_destroy:u,after_update:a}=t.$$;r&&r.m(e,i),_(()=>{const e=c.map(n).filter(l);u?u.push(...e):o(e),t.$$.on_mount=[]}),a.forEach(_)}function M(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function N(t,n){-1===t.$$.dirty[0]&&(b.push(t),w||(w=!0,C.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function G(n,l,i,r,c,u,a=[-1]){const s=p;v(n);const d=l.props||{},f=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:[]),callbacks:e(),dirty:a};let g=!1;f.ctx=i?i(n,d,(t,e,...o)=>{const l=o.length?o[0]:e;return f.ctx&&c(f.ctx[t],f.ctx[t]=l)&&(f.bound[t]&&f.bound[t](l),g&&N(n,t)),e}):[],f.update(),g=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),l.target&&(l.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(l.target)):f.fragment&&f.fragment.c(),l.intro&&T(n.$$.fragment),I(n,l.target,l.anchor),S()),v(s)}class V{$destroy(){M(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function B(t,n,e){const o=t.slice();return o[16]=n[e],o[18]=e,o}function O(t){let n,e=t[1],o=[];for(let n=0;n<e.length;n+=1)o[n]=W(B(t,e,n));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=d("")},m(t,e){for(let n=0;n<o.length;n+=1)o[n].m(t,e);c(t,n,e)},p(t,l){if(450&l){let i;for(e=t[1],i=0;i<e.length;i+=1){const r=B(t,e,i);o[i]?o[i].p(r,l):(o[i]=W(r),o[i].c(),o[i].m(n.parentNode,n))}for(;i<o.length;i+=1)o[i].d(1);o.length=e.length}},d(t){a(o,t),t&&u(n)}}}function R(t){let n,e,o;return{c(){n=s("div"),e=d(t[0]),h(n,"class","big")},m(l,i){c(l,n,i),r(n,e),o=g(n,"click",t[5])},p(t,n){1&n&&m(e,t[0])},d(t){t&&u(n),o()}}}function U(t){let n,e=t[18]+1+"";return{c(){n=d(e)},m(t,e){c(t,n,e)},d(t){t&&u(n)}}}function W(t){let n,e,l,i=t[16]&&U(t);function a(...n){return t[14](t[18],...n)}function d(...n){return t[15](t[18],...n)}return{c(){n=s("div"),i&&i.c(),e=f(),h(n,"class","small")},m(o,u){c(o,n,u),i&&i.m(n,null),r(n,e),l=[g(n,"pointerdown",a),g(n,"pointerup",d),g(n,"pointerleave",t[8])]},p(o,l){(t=o)[16]?i||(i=U(t),i.c(),i.m(n,e)):i&&(i.d(1),i=null)},d(t){t&&u(n),i&&i.d(),o(l)}}}function z(n){let e,o;function l(t,n){return void 0!==t[0]?R:O}let i=l(n),r=i(n);return{c(){e=s("div"),r.c(),h(e,"class",o="cell R"+n[4]+" C"+n[3]+" "+(n[2]?"locked":""))},m(t,n){c(t,e,n),r.m(e,null)},p(t,[n]){i===(i=l(t))&&r?r.p(t,n):(r.d(1),r=i(t),r&&(r.c(),r.m(e,null))),4&n&&o!==(o="cell R"+t[4]+" C"+t[3]+" "+(t[2]?"locked":""))&&h(e,"class",o)},i:t,o:t,d(t){t&&u(e),r.d()}}}function F(t,n,e){let{value:o}=n,{annotations:l}=n,{index:i}=n,{isLocked:r}=n,c=$(),u=void 0,a=void 0,s=i%9,d=~~(i/9);function f(){clearTimeout(u),a=void 0}function g(t){r||(void 0!==u&&f(),u=setTimeout(()=>{c("setCellValue",{index:i,value:t+1}),f()},250))}function h(t){void 0!==u&&(f(),c("toggleAnnotation",{index:i,value:t}))}return t.$set=t=>{"value"in t&&e(0,o=t.value),"annotations"in t&&e(1,l=t.annotations),"index"in t&&e(9,i=t.index),"isLocked"in t&&e(2,r=t.isLocked)},[o,l,r,s,d,function(){r||c("setCellValue",{index:i,value:void 0})},g,h,function(){f()},i,u,a,c,f,t=>g(t),t=>h(t)]}class H extends V{constructor(t){super(),G(this,t,F,z,i,{value:0,annotations:1,index:9,isLocked:2})}}function P(t,n,e){const o=t.slice();return o[13]=n[e],o[15]=e,o}function D(t){let n;const e=new H({props:{value:t[13],annotations:t[1][t[15]],isLocked:t[2][t[15]],index:t[15]}});return e.$on("toggleAnnotation",t[6]),e.$on("setCellValue",t[5]),{c(){j(e.$$.fragment)},m(t,o){I(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.value=t[13]),2&n&&(o.annotations=t[1][t[15]]),4&n&&(o.isLocked=t[2][t[15]]),e.$set(o)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){q(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function J(t){let n,e,l,i,p,v,$,b,k,x,y,C,w,_,S,L,A=void 0===t[3]?"Generate":"Stop",j=t[0],I=[];for(let n=0;n<j.length;n+=1)I[n]=D(P(t,j,n));const M=t=>q(I[t],1,1,()=>{I[t]=null});return{c(){n=s("div"),e=s("div");for(let t=0;t<I.length;t+=1)I[t].c();l=f(),i=s("div"),p=s("button"),v=d(A),$=f(),b=s("button"),b.textContent="Clear",k=f(),x=s("button"),x.textContent=`${t[4]()?"Solve":"Stop"}`,y=f(),C=s("button"),C.textContent="Lock",w=f(),_=s("button"),_.textContent="Unlock",h(e,"class","grid"),h(i,"id","buttons")},m(o,u){c(o,n,u),r(n,e);for(let t=0;t<I.length;t+=1)I[t].m(e,null);r(n,l),r(n,i),r(i,p),r(p,v),r(i,$),r(i,b),r(i,k),r(i,x),r(i,y),r(i,C),r(i,w),r(i,_),S=!0,L=[g(p,"click",t[9]),g(b,"click",t[11]),g(x,"click",t[10]),g(C,"click",t[7]),g(_,"click",t[8])]},p(t,[n]){if(103&n){let l;for(j=t[0],l=0;l<j.length;l+=1){const o=P(t,j,l);I[l]?(I[l].p(o,n),T(I[l],1)):(I[l]=D(o),I[l].c(),T(I[l],1),I[l].m(e,null))}for(E={r:0,c:[],p:E},l=j.length;l<I.length;l+=1)M(l);E.r||o(E.c),E=E.p}(!S||8&n)&&A!==(A=void 0===t[3]?"Generate":"Stop")&&m(v,A)},i(t){if(!S){for(let t=0;t<j.length;t+=1)T(I[t]);S=!0}},o(t){I=I.filter(Boolean);for(let t=0;t<I.length;t+=1)q(I[t]);S=!1},d(t){t&&u(n),a(I,t),o(L)}}}function K(t,n,e){let o=Array(81).fill(void 0),l=Array(81);for(let t=0;t<81;t++)l[t]=Array(9).fill(!1);let i=Array(81).fill(!1),r=void 0;function c(){return void 0===r}function u(){for(let t=0;t<81;t++)e(1,l[t]=Array(9).fill(!1),l)}function a(){for(let t=0;t<81;t++)e(2,i[t]=void 0!==o[t],i)}return[o,l,i,r,c,function(t){e(0,o[t.detail.index]=t.detail.value,o)},function(t){e(1,l[t.detail.index][t.detail.value]=!l[t.detail.index][t.detail.value],l)},a,function(){for(let t=0;t<81;t++)e(2,i[t]=!1,i)},function(){c()?(e(3,r=new Worker("./solver.js")),r.postMessage({command:"generate"}),e(3,r.onmessage=t=>{void 0!==t.data&&(e(0,o=t.data),u(),a()),r.terminate(),e(3,r=void 0)},r)):(r.terminate(),e(3,r=void 0))},function(){c()?(e(3,r=new Worker("./solver.js")),r.postMessage({command:"solve",values:o}),e(3,r.onmessage=t=>{void 0!==t.data&&e(0,o=t.data),r.terminate(),e(3,r=void 0)},r)):(r.terminate(),e(3,r=void 0))},function(){for(let t=0;t<81;t++)i[t]||e(0,o[t]=void 0,o);u()}]}class Q extends V{constructor(t){super(),G(this,t,K,J,i,{})}}function X(n){let e,o,l,i,r;const a=new Q({});return{c(){e=s("h1"),e.textContent="Sudoku",o=f(),j(a.$$.fragment),l=f(),i=s("div"),i.innerHTML="<h2>Instructions</h2> \n    <ul><li>Interaction with cells is done by clicking on one of the 3x3 subcells each representing a value from 1\n            to 9:\n            <ul><li>Long-click on a cell&#39;s subcell to place a value in the cell</li> \n                <li>Short-click on a cell&#39;s subcell to toggle a pencil annotation</li></ul></li> \n        <li>The <strong>Generate</strong> button clears the grid and generates a new proper Sudoku (single solution, all hints\n            required)\n        </li> \n        <li>The <strong>Clear</strong> button clears the value of all non-locked cells</li> \n        <li>The <strong>Lock</strong> button locks all cells with a value</li> \n        <li>The <strong>Unlock</strong> button unlocks all cells</li> \n        <li>The <strong>Solve</strong> button searches for a solution of the current grid\n            <ul><li>Cell values cannot be changed while solver is running</li> \n                <li>Solver can be interrupted by clicking on the same button (labeled &quot;Stop&quot; during computation)\n                </li> \n                <li>If a solution is found, values are displayed</li> \n                <li>If no solution exists, the solver ends (button labeled &quot;Solve&quot; again) but cells are not\n                    modified\n                </li></ul></li></ul>",h(i,"id","info")},m(t,n){c(t,e,n),c(t,o,n),I(a,t,n),c(t,l,n),c(t,i,n),r=!0},p:t,i(t){r||(T(a.$$.fragment,t),r=!0)},o(t){q(a.$$.fragment,t),r=!1},d(t){t&&u(e),t&&u(o),M(a,t),t&&u(l),t&&u(i)}}}return new class extends V{constructor(t){super(),G(this,t,null,X,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
